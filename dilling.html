<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Transport Bill</title>
    <style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: Arial, sans-serif;
    background: #f5f5f5;
    padding: 20px;
}
 

.bill-container {
    width: 210mm;
    min-height: 297mm;
    margin: 0 auto 20px;
    background: white;
    padding: 20px;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    page-break-after: always;
}

.bill-container:last-child {
    page-break-after: auto;
}

.header {
    text-align: center;
    margin-bottom: 10px;
    padding-bottom: 10px;
}

.header h1 {
    font-size: 20px;
    margin-bottom: 5px;
    color: rgb(122, 184, 122);
}

.header p {
    font-size: 11px;
    margin: 2px 0;
}

.company-details {
    padding: 10px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-bottom: 10px;
    font-size: 11px;
    border-bottom: 2px solid #333;
}

.company-details div {
    line-height: 1.6;
}

.company-details p {
    margin: 3px 0;
}

.bill-info {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 15px;
    margin-bottom: 10px;
    padding: 10px;
    background: #f9f9f9;
    border: 1px solid #ddd;
}

.bill-info div {
    font-size: 11px;
}

.bill-info p {
    margin: 3px 0;
}

.bill-info label {
    font-weight: bold;
    display: inline-block;
    min-width: 120px;
}

table {
    width: 100%;
    border-collapse: collapse;
    table-layout: fixed;
    margin-bottom: 10px;
}

th, td {
    border-left: 1px solid #dfdfdf;
    border-right: 1px solid #dfdfdf;
    padding: 6px;
    font-size: 11px;
    white-space: normal;
    word-wrap: break-word;
    overflow-wrap: break-word;
    text-align: center;
}

th {
    background: #f0f0f0;
    font-weight: bold;
    border-top: 1px solid #dfdfdf;
}

td {
    vertical-align: top;
}

tbody tr:nth-child(even) {
    background: #fafafa;
}

.amount-total-row {
    display: flex;
    border: 1px solid #333;
    font-size: 11px;
    margin-bottom: 10px;
}

.amount-words {
    flex: 1;
    padding: 8px;
    border-right: 1px solid #333;
}

.amount-words span {
    margin-left: 5px;
}

.total-label {
    padding: 10px;
    font-weight: bold;
}

.total-value {
    padding: 10px;
    font-weight: bold;
}

.bank-details {
    padding: 10px;
    background: #f9f9f9;
    border: 1px solid #ddd;
    font-size: 11px;
    margin-bottom: 10px;
}

.bank-details h3 {
    margin-bottom: 5px;
    font-size: 12px;
}

.bank-details p {
    margin: 3px 0;
}

.footer {
    text-align: right;
    font-size: 10px;
    margin-bottom: 10px;
}

.footer p {
    margin: 5px 0;
}

.slogan {
    margin-top: 5px;
    font-style: italic;
    text-align: center;
    font-size: 11px;
}

.page-indicator {
    text-align: center;
    font-size: 10px;
    color: #666;
    margin-top: 20px;
    padding-top: 10px;
}

@media print {
    body {
        background: white;
        padding: 0;
    }
    
    .bill-container {
        box-shadow: none;
        margin: 0;
        padding: 20px;
        min-height: 297mm;
    }

    @page {
        size: A4;
        margin: 0;
    }
}

.amount-total-row,
.bank-details,
.footer,
.slogan {
    page-break-inside: avoid;
    break-inside: avoid;
}

.bill-footer {
    page-break-inside: avoid;
    break-inside: avoid;
}
    </style>
  </head>
  <body>
    <div id="billPages"></div>

    <script>
      const billData = {
  "copy": "Original",
  "company": {
    "name": "SRI PALANI ANDAVAR TRANSPORT",
    "address": "6/260 Karayapalayam, Sembiyanallur (PO), Avinashi, Tiruppur - 641654",
    "state": "Tamil Nadu",
    "code": "33",
    "gstin": "33ABCDE1234F1Z5",
    "email": "sptransport@gmail.com",
    "contactName": "Mr. Palanisamy",
    "contactNumber": "9876543210",
    "slogun": "Delivering Your Goods with Precision and Care",
    "bank": {
      "name": "bank name",
      "accNo": "1214dfsdgsdgfsd",
      "ifsc": "121jj1jj1j"
    }
  },
  "bill": {
    "to": "ABC TEXTILES PVT LTD\nChennai - 600001",
    "no": "SPAT/INV/001",
    "date": "25/12/2024",
    "paymentTerms": "Net 30 Days",
    "vehicleNo": "TN 37 AB 1234",
    "period": "01/12/2024 to 31/12/2024",
    "details": [
      {
        "date": "01/12/2024",
        "from": "Chennai",
        "to": "Coimbatore",
        "trip": "1",
        "dec": "Steel Bars",
        "amount": 5000
      },
      {
        "date": "02/12/2024",
        "from": "Coimbatore",
        "to": "Tiruppur",
        "trip": "2",
        "dec": "Textile Materials",
        "amount": 3500
      },
      {
        "date": "03/12/2024",
        "from": "Tiruppur",
        "to": "jbai",
        "trip": "1",
        "dec": "Cotton Fabrics",
        "amount": 4200
      },
      {
        "date": "02/12/2024",
        "from": "Coimbatore",
        "to": "Tiruppur",
        "trip": "2",
        "dec": "Textile Materials",
        "amount": 3500
      },
      {
        "date": "03/12/2024",
        "from": "Tiruppur",
        "to": "jbai",
        "trip": "1",
        "dec": "Cotton Fabrics",
        "amount": 4200
      },
      {
        "date": "02/12/2024",
        "from": "Coimbatore",
        "to": "Tiruppur",
        "trip": "2",
        "dec": "Textile Materials",
        "amount": 3500
      },
      {
        "date": "03/12/2024",
        "from": "Tiruppur",
        "to": "bai",
        "trip": "1",
        "dec": "Cotton Fabrics",
        "amount": 4200
      },
      {
        "date": "02/12/2024",
        "from": "Coimbatore",
        "to": "Tiruppur",
        "trip": "2",
        "dec": "Textile Materials",
        "amount": 3500
      },
      {
        "date": "03/12/2024",
        "from": "Tiruppur",
        "to": "ai",
        "trip": "1",
        "dec": "Cotton Fabrics",
        "amount": 4200.9
      },
      {
        "date": "02/12/2024",
        "from": "Coimbatore",
        "to": "Chenkj",
        "trip": "2",
        "dec": "Textile n",
        "amount": 3500
      },
      {
        "date": "02/12/2024",
        "from": "Coimbatore",
        "to": "Tiruppur",
        "trip": "2",
        "dec": "Textile n",
        "amount": 3500
      },
      {
        "date": "02/12/2024",
        "from": "husfjbhvsdzkjfcvskdzfckhsdzcsdhjxj",
        "to": "m",
        "trip": "2",
        "dec": "d",
        "amount": 3500
      },
      {
        "date": "02/12/2024",
        "from": "Coimbatore",
        "to": "Tiruppur",
        "trip": "2",
        "dec": "d",
        "amount": 3500
      },
      {
        "date": "02/12/2024",
        "from": "Coimbatore",
        "to": "Tiruppur",
        "trip": "2",
        "dec": "d",
        "amount": 3500
      },
      {
        "date": "02/12/2024",
        "from": "Coimbatore",
        "to": "Tiruppur",
        "trip": "2",
        "dec": "d",
        "amount": 3500
      },
      {
        "date": "02/12/2024",
        "from": "Coimbatore",
        "to": "Tiruppur",
        "trip": "2",
        "dec": "d",
        "amount": 3500
      },
      {
        "date": "02/12/2024",
        "from": "Coimbatore",
        "to": "Tiruppur",
        "trip": "2",
        "dec": "d",
        "amount": 3500
      },
      {
        "date": "02/12/2024",
        "from": "Coimbatore",
        "to": "Tird",
        "trip": "2",
        "dec": "d",
        "amount": 3500
      },
      {
        "date": "02/12/2024",
        "from": "Coimbatore",
        "to": "Tird",
        "trip": "2",
        "dec": "d",
        "amount": 3500
      },
      {
        "date": "02/12/2024",
        "from": "Coimbatore",
        "to": "Tird",
        "trip": "2",
        "dec": "d",
        "amount": 3500
      }
    ]
  }
}

      function numberToWords(num) {
        const ones = [
          "",
          "One",
          "Two",
          "Three",
          "Four",
          "Five",
          "Six",
          "Seven",
          "Eight",
          "Nine",
        ];
        const tens = [
          "",
          "",
          "Twenty",
          "Thirty",
          "Forty",
          "Fifty",
          "Sixty",
          "Seventy",
          "Eighty",
          "Ninety",
        ];
        const teens = [
          "Ten",
          "Eleven",
          "Twelve",
          "Thirteen",
          "Fourteen",
          "Fifteen",
          "Sixteen",
          "Seventeen",
          "Eighteen",
          "Nineteen",
        ];

        if (num === 0) return "Zero Rupees Only";

        num = Math.round(num * 100) / 100;
        const integerPart = Math.floor(num);

        let words = "";

        if (integerPart >= 10000000) {
          words +=
            numberToWords(Math.floor(integerPart / 10000000)) + " Crore ";
          num = integerPart % 10000000;
        } else {
          num = integerPart;
        }

        if (num >= 100000) {
          const lakhPart = Math.floor(num / 100000);
          words +=
            ones[lakhPart] ||
            tens[Math.floor(lakhPart / 10)] + " " + ones[lakhPart % 10];
          words += " Lakh ";
          num %= 100000;
        }

        if (num >= 1000) {
          const thousandPart = Math.floor(num / 1000);
          if (thousandPart >= 10 && thousandPart < 20) {
            words += teens[thousandPart - 10] + " ";
          } else {
            words +=
              tens[Math.floor(thousandPart / 10)] +
              " " +
              ones[thousandPart % 10] +
              " ";
          }
          words += "Thousand ";
          num %= 1000;
        }

        if (num >= 100) {
          words += ones[Math.floor(num / 100)] + " Hundred ";
          num %= 100;
        }

        if (num >= 20) {
          words += tens[Math.floor(num / 10)] + " ";
          num %= 10;
        }

        if (num >= 10) {
          words += teens[num - 10] + " ";
          num = 0;
        }

        if (num > 0) {
          words += ones[num] + " ";
        }

        return words.trim().replace(/\s+/g, " ") + " Rupees Only";
      }

      function estimateRowHeight(item) {
        const baseHeight = 22;

        const fromCharsPerLine = 16;
        const fromLines = Math.ceil(item.from.length / fromCharsPerLine);

        const toCharsPerLine = 16;
        const toLines = Math.ceil(item.to.length / toCharsPerLine);

        const decCharsPerLine = 28;
        const decLines = Math.ceil(item.dec.length / decCharsPerLine);

        const maxLines = Math.max(fromLines, toLines, decLines, 1);

        return baseHeight + (maxLines - 1) * 15;
      }

      function createHeader(isFirstPage) {
        return `
                <div class="header">
                    <p style="text-align: right; font-size: 10px; margin-bottom: 10px;">({{copy}})</p>
                    <h1 style="color: rgb(122, 184, 122);">{{company.name}}</h1>
                    <p>{{company.address}}</p>
                </div>

                <div class="company-details">
                    <div>
                        <p><strong>State Name:</strong> {{company.state}}</p>
                        <p><strong>Code:</strong> {{company.code}}</p>
                        <p><strong>GSTIN:</strong> {{company.gstin}}</p>
                    </div>
                    <div>
                        <p><strong>Email:</strong> {{company.email}}</p>
                        <p><strong>Contact Person:</strong> {{company.contactName}}</p>
                        <p><strong>Mobile:</strong> {{company.contactNumber}}</p>
                    </div>
                </div>

                ${
                  isFirstPage
                    ? `
                <div class="bill-info">
                    <div>
                        <p><strong>Bill to:</strong></p>
                        <p>{{bill.to}}</p>
                    </div>
                    <div>
                        <p><label>Bill No:</label> <span>{{bill.no}}</span></p>
                        <p><label>Date:</label> <span>{{bill.date}}</span></p>
                        <p><label>Payment terms:</label> <span>{{bill.paymentTerms}}</span></p>
                        <p><label>Vehicle No:</label> <span>{{bill.vehicleNo}}</span></p>
                        <p><label>Period:</label> <span>{{bill.period}}</span></p>
                    </div>
                </div>
                `
                    : ""
                }
            `;
      }

        function createTableHeader() {
        return `
            <table>
            <colgroup>
                <col style="width: 4%;">
                <col style="width: 10%;">
                <col style="width: 19%;">
                <col style="width: 19%;">
                <col style="width: 18%;">
                <col style="width: 6%;">
                <col style="width: 12%;">
                <col style="width: 12%;">
            </colgroup>
            <thead>
                <tr>
                <th rowspan="2">S.No</th>
                <th rowspan="2">Date</th>
                <th colspan="2">Goods Dispatch Location</th>
                <th rowspan="2">Description of Goods</th>
                <th rowspan="2">Trips</th>
                <th rowspan="2">Rate/Trip</th>
                <th rowspan="2">Amount</th>
                </tr>
                <tr>
                <th>From</th>
                <th>To</th>
                </tr>
            </thead>
            <tbody>
        `;
        }


      function createFooter(total) {
        return `
                </tbody>
                </table>

                <div class="bill-footer">
                    <div class="amount-total-row">
                        <div class="amount-words">
                            <strong>Chargeable Amount in Words :</strong>
                            <span>${numberToWords(total)}</span>
                        </div>
                        <div class="total-label">TOTAL</div>
                        <div class="total-value">â‚¹ ${total.toFixed(2)}</div>
                    </div>

                    <div class="bank-details">
                        <h3>Bank Details</h3>
                        <p><strong>Bank Name:</strong> {{company.bank.name}}</p>
                        <p><strong>Acc No:</strong> {{company.bank.accNo}}</p>
                        <p><strong>IFSC Code:</strong> {{company.bank.ifsc}}</p>
                    </div>

                    <div class="footer">
                        <p>For {{company.name}}</p>
                        <p style="margin-top: 50px;"><strong>AUTHORISED SIGNATORY</strong></p>
                    </div>

                    <div class="slogan">
                        <p>{{company.slogun}}</p>
                    </div>
                </div>
            `;
      }
        function generatePages() {
        const container = document.getElementById("billPages");
        const details = billData.details;
        const total = details.reduce((sum, item) => sum + (item.trip * item.amount), 0);

        const PAGE_HEIGHT = 1000;
        const HEADER_HEIGHT = 170;
        const BILL_INFO_HEIGHT = 90;
        const TABLE_HEADER_HEIGHT = 30;
        const FOOTER_HEIGHT = 250;
        const CONTINUATION_HEIGHT = 30;

        let currentIndex = 0;
        let pageNumber = 1;

        while (currentIndex < details.length) {
          const isFirstPage = pageNumber === 1;

          let availableHeight =
            PAGE_HEIGHT - HEADER_HEIGHT - TABLE_HEADER_HEIGHT;
          if (isFirstPage) {
            availableHeight -= BILL_INFO_HEIGHT;
          }

          let pageRows = [];
          let accumulatedHeight = 0;
          let tempIndex = currentIndex;

          while (tempIndex < details.length) {
            const rowHeight = estimateRowHeight(details[tempIndex]);
            pageRows.push(details[tempIndex]);
            accumulatedHeight += rowHeight;
            tempIndex++;
          }

          const isLastPage = tempIndex >= details.length;
          const spaceNeeded = isLastPage ? FOOTER_HEIGHT : CONTINUATION_HEIGHT;

          while (
            accumulatedHeight + spaceNeeded > availableHeight &&
            pageRows.length > 1
          ) {
            const removedRow = pageRows.pop();
            tempIndex--;
            accumulatedHeight -= estimateRowHeight(removedRow);
          }

          currentIndex = tempIndex;

          const page = document.createElement("div");
          page.className = "bill-container";
          page.innerHTML = createHeader(isFirstPage) + createTableHeader();

          const tbody = page.querySelector("tbody");
          const startIndex = currentIndex - pageRows.length;

          pageRows.forEach((item, idx) => {
            const totalAmount = item.trip * item.amount;
            const row = document.createElement("tr");
            row.innerHTML = `
                        <td>${startIndex + idx + 1}</td>
                        <td>${item.date}</td>
                        <td>${item.from}</td>
                        <td>${item.to}</td>
                        <td>${item.dec}</td>
                        <td>${item.trip}</td>
                        <td>${item.amount.toFixed(2)}</td>
                        <td>${totalAmount.toFixed(2)}</td>
                    `;
            tbody.appendChild(row);
          });

          const isThisLastPage = currentIndex >= details.length;

          if (isThisLastPage) {
            page.innerHTML += createFooter(total);
          } else {
            page
              .querySelector("tbody")
              .insertAdjacentHTML("afterend", "</tbody></table>");
            page.insertAdjacentHTML(
              "beforeend",
              `<div class="page-indicator">(Continued...)</div>`
            );
          }

          container.appendChild(page);
          pageNumber++;
        }
      }

      window.addEventListener("load", () => {
        setTimeout(generatePages, 100);
      });
    </script>
  </body>
</html>

<img style="height: 30px; width: 100px;" src="https://esig-development.zohostratus.in/Screenshot%202026-01-16%20at%201.11.11%E2%80%AFAM.png" alt="">